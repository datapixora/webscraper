# ==================================
# WEBSCRAPER PLATFORM - ENVIRONMENT VARIABLES
# ==================================
# Copy this file to .env and update with your values
# NEVER commit .env to version control

# ==================================
# ENVIRONMENT
# ==================================
ENVIRONMENT=development  # development, staging, production

# ==================================
# DATABASE (PostgreSQL)
# ==================================
POSTGRES_USER=webscraper
POSTGRES_PASSWORD=webscraper_dev_password  # CHANGE IN PRODUCTION
POSTGRES_DB=webscraper_db
POSTGRES_HOST=localhost
POSTGRES_PORT=5432

# Full database URL (auto-constructed in docker-compose)
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# ==================================
# REDIS
# ==================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=  # Leave empty for dev, set in production
REDIS_URL=redis://${REDIS_HOST}:${REDIS_PORT}/0

# ==================================
# BACKEND (FastAPI)
# ==================================
BACKEND_PORT=8000
SECRET_KEY=your-secret-key-min-32-chars-change-in-production  # Generate with: openssl rand -hex 32
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# CORS
CORS_ORIGINS=http://localhost:3000,http://localhost:8000  # Comma-separated

# API Rate Limiting
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_BURST=10

# ==================================
# FRONTEND (Next.js)
# ==================================
FRONTEND_PORT=3000
NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_APP_NAME=WebScraper Platform
NEXT_PUBLIC_APP_VERSION=1.0.0

# NextAuth (if using)
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=your-nextauth-secret-change-in-production  # Generate with: openssl rand -base64 32

# ==================================
# SCRAPING ENGINE
# ==================================
# Playwright
PLAYWRIGHT_BROWSER=chromium  # chromium, firefox, webkit
PLAYWRIGHT_HEADLESS=true
PLAYWRIGHT_TIMEOUT=30000  # milliseconds

# Rate Limiting & Throttling
DEFAULT_REQUEST_DELAY=1000  # milliseconds between requests
MAX_CONCURRENT_JOBS=5
DEFAULT_RETRY_ATTEMPTS=3
DEFAULT_TIMEOUT=30  # seconds

# User Agents (random selection, comma-separated)
USER_AGENTS=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36,Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36

# ==================================
# PROXY CONFIGURATION (Optional)
# ==================================
PROXY_ENABLED=false
PROXY_POOL=  # Comma-separated: http://proxy1:port,http://proxy2:port
PROXY_USERNAME=
PROXY_PASSWORD=
PROXY_ROTATION_STRATEGY=round_robin  # round_robin, random, least_used

# ==================================
# CELERY (Task Queue)
# ==================================
CELERY_BROKER_URL=${REDIS_URL}
CELERY_RESULT_BACKEND=${REDIS_URL}
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=json
CELERY_TIMEZONE=UTC
CELERY_ENABLE_UTC=true
CELERY_TASK_TRACK_STARTED=true
CELERY_TASK_TIME_LIMIT=3600  # 1 hour max per task

# Worker configuration
CELERY_WORKER_CONCURRENCY=4
CELERY_WORKER_PREFETCH_MULTIPLIER=1

# ==================================
# LOGGING
# ==================================
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FORMAT=json  # json or text
LOG_FILE_ENABLED=true
LOG_FILE_PATH=./logs/app.log
LOG_FILE_MAX_SIZE=10485760  # 10MB
LOG_FILE_BACKUP_COUNT=5

# ==================================
# MONITORING (Optional)
# ==================================
# Flower (Celery monitoring)
FLOWER_PORT=5555
FLOWER_BASIC_AUTH=admin:admin  # user:password

# Sentry (Error tracking)
SENTRY_DSN=
SENTRY_ENVIRONMENT=${ENVIRONMENT}
SENTRY_TRACES_SAMPLE_RATE=0.1

# ==================================
# EMAIL (For notifications - Optional)
# ==================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_FROM_EMAIL=noreply@webscraper.com
SMTP_FROM_NAME=WebScraper Platform

# ==================================
# WEBHOOKS
# ==================================
WEBHOOK_TIMEOUT=10  # seconds
WEBHOOK_RETRY_ATTEMPTS=3
WEBHOOK_RETRY_DELAY=5  # seconds

# ==================================
# STORAGE (For large results - Optional)
# ==================================
STORAGE_BACKEND=local  # local, s3, gcs
STORAGE_LOCAL_PATH=./storage

# S3 Configuration
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_S3_BUCKET=
AWS_S3_REGION=us-east-1

# ==================================
# SECURITY
# ==================================
# Password hashing
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_DIGIT=true
PASSWORD_REQUIRE_SPECIAL=false

# JWT
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# API Keys
API_KEY_LENGTH=32

# ==================================
# PAGINATION
# ==================================
DEFAULT_PAGE_SIZE=20
MAX_PAGE_SIZE=100

# ==================================
# FEATURE FLAGS (Optional)
# ==================================
FEATURE_WEBHOOKS_ENABLED=true
FEATURE_PROXY_ROTATION_ENABLED=false
FEATURE_EMAIL_NOTIFICATIONS_ENABLED=false
FEATURE_GRAPHQL_ENABLED=false

# ==================================
# DEVELOPMENT TOOLS
# ==================================
DEBUG=false  # Set to true for development debugging
RELOAD=true  # Auto-reload on code changes (dev only)
